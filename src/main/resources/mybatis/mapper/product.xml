<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
	
<mapper namespace="com.mycompany.lifill_mini_web.dao.ProductDao">

	<select id="prdcount" resultType="int">
		select count(*) from product
	</select>
	
	<select id="prdSalesOnCount" resultType="int">
		select count(*) from product where prdsalesstatus=1
	</select>
	
	<select id="prdSalesOffCount" resultType="int">
		select count(*) from product where prdsalesstatus=0
	</select>
	
	<insert id="prdinsert" parameterType="Product">
		insert into product(
			prdcode, prdname, prdbrand, prdprice, prdstock,
			prdsubscribable, prdsalesstatus, fnno, igdno
		)
		values(
			#{prdcode}, #{prdname}, #{prdbrand}, #{prdprice}, #{prdstock}, 
			#{prdsubscribable}, #{prdsalesstatus}, #{fnno}, #{igdno}
		)
	</insert>
	
	<update id="prdUpdate" parameterType="Product">
		update product set
			prdname=#{prdname}, 
			prdbrand=#{prdbrand}, 
			prdprice=#{prdprice}, 
			prdstock=#{prdstock},
			prdsubscribable=#{prdsubscribable}, 
			prdsalesstatus=#{prdsalesstatus}, 
			fnno=#{fnno}
		
		where prdcode=#{prdcode}
	</update>
	
	
	<!-- 구독가능  전체 상품 개수 조회  -->
	<select id="getAllPrdSubOneCnt" resultType="int">
		select count(*) from product where prdsalesstatus=1 and prdsubscribable=1
	</select>
	
	<select id="getPrdSubFilterCnt" parameterType="String" resultType="int">
		select count(*) from product where prdsalesstatus=1 
		and fnno=#{subInt}
	</select>
	
	<select id="getPrdSubFilterOneCnt" parameterType="String" resultType="int">
		select count(*) from product where prdsalesstatus=1 
		and fnno=#{subInt}
		and prdsubscribable=1
	</select>
	
</mapper>