<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
	
<mapper namespace="com.mycompany.lifill_mini_web.dao.MemberDao"> 
	<select id="selectByMid" parameterType="String" resultType="Member">
		select mid, mpassword, mname, mphone, memail, mrole
		from member
		where mid=#{mid}
	</select>
	
	<insert id="mInsert" parameterType="MemberResponse">
		insert into member (mid, mpassword, mname, mphone, memail, mrole, mcreatedat, menabled)
		values(#{mid}, #{mpassword}, #{mname}, #{mphone}, #{memail}, #{mrole}, sysdate, 1)
	</insert>
	
	<select id="selectAddressByMid" parameterType="String" resultType="String">
		select maddress
		from address
		where mid=#{mid}
	</select>
	
	<select id="selectZipcodeByMid" parameterType="String" resultType="String">
		select mzipcode
		from address
		where mid=#{mid}
	</select>
	
	<select id="getMpasswordbyMid" parameterType="String" resultType="String">
		select mpassword
		from member
		where mid=#{mid}
	</select>
	
	<update id="updateMstatusbyMid" parameterType="String">
		update member
		set menabled = 0
		where mid=#{mid}
	</update>
	
	<select id="selectMphoneByMid" parameterType="Member" resultType="String">
		select mphone
		from member
		where mid=#{mid}
	</select>
	
	<update id="updateMpassword" parameterType="Member">
		update member
		set mpassword=#{mpassword}
		where mid=#{mid}
	</update>
	
	<update id="updateMphone" parameterType="Member">
		update member
		set mphone=#{mphone}
		where mid=#{mid}
	</update>
	
	<select id="findId" parameterType="Member"
		resultType="String">
		select mid
		from member
		where mname = #{mname}
		and memail= #{memail}
		
	</select>
	
	<select id="findPw" parameterType="Member"
		resultType="String">
		select mpassword
		from member
		where mid = #{mid}
		and mphone= #{mphone}
		
	</select>
	
	<!-- 새 비밀번호로 정보 변경 -->
	<update id="changePw" parameterType="Member">
		update member
		set
		mpassword=#{mpassword}
		where mid= #{mid}
	</update>
	
</mapper>